* (La)TeX

** How to write better LaTeX?                             :guidelines:

   - [[https://texfaq.org/][TeX FAQ]]: The TeX Frequently Asked Question List
   - [[https://www.ctan.org/pkg/nag][nug]]: Package that warns the user about the use of obsolete things
   - [[https://www.ctan.org/pkg/l2tabu-english][l2tabu]]: Practical usage guide with mistakes, obsolete packages and
     commands

** How to avoid orphan words?

   Sometimes, we have one or two words hanging on the last line of a
   paragraph.

   - Adjust =badness= limits
   - =\parfillskip= controls the length at the end of a paragraph

** When should I use non-breaking space (tilde)?

   - [[https://tex.stackexchange.com/a/15555/225233][When should I use non-breaking space?]]
   - [[https://tex.stackexchange.com/a/1797/225233][What is the right way to use of non-breakable space before math expressions?]]

** How to write an unnumbered footnote?

   - [[https://tex.stackexchange.com/a/170512/225233][Footnotes without numbering]]

** What symbol should I use for ... ?

   - [[http://www.math.toronto.edu/mathit/symbols-letter.pdf][The Comprehensive LaTeX Symbol List]]
   - [[https://oeis.org/wiki/List_of_LaTeX_mathematical_symbols][List of LaTeX mathematical symbols]]: all predefined mathematical symbols

** Symbol lookup

   - [[http://detexify.kirelabs.org/classify.html][Detexify]]: draw symbol by hand or use the symbol table

** How to debug the LaTeX document layout, sizes, and spacing?

   - [[https://ctan.math.washington.edu/tex-archive/macros/luatex/generic/lua-visual-debug/][lua-visual-debug]]: it looks [[https://ctan.math.washington.edu/tex-archive/macros/luatex/generic/lua-visual-debug/doc/sample.pdf][gorgeous]]

** What is the document body ratio?

   #+begin_src latex
     Body width:  \the\textwidth
     Body height: \the\textheight
   #+end_src

   - [[https://tex.stackexchange.com/q/253354/225233][How to interpret the page layout in LaTeX using layout package?]]
   - [[https://i.stack.imgur.com/kOAM5.png][Page layour visual guide]]

** How to reduce spacing around figures, tables, captions?

   - \textfloatsep — distance between floats on the top or the bottom and the text;
   - \floatsep — distance between two floats;
   - \intextsep — distance between floats inserted inside the page text
   - (using h) and the text proper.
   - \dbltextfloatsep — distance between a float spanning both columns and the text;
   - \dblfloatsep — distance between two floats spanning both columns.
   - \captionsetup{font=footnotesize}

     #+begin_src latex
       % Reduced margins
       \usepackage{geometry}
       \geometry{left=0.75in,right=0.75in,bottom=1in,top=1in}

       % Minimal spacing around captions and floats
       \setlength{\abovecaptionskip}{2pt plus 1pt minus 2pt}
       \setlength{\belowcaptionskip}{2pt plus 1pt minus 2pt}
       \setlength{\textfloatsep}{2pt plus 1pt minus 2pt}
       \setlength{\intextsep}{2pt plus 1pt minus 2pt}
       \setlength{\floatsep}{2pt plus 1pt minus 2pt}

       % Minimal spacing around equations
       \setlength{\abovedisplayskip}{0pt}
       \setlength{\belowdisplayskip}{0pt}
       \setlength{\abovedisplayshortskip}{0pt}
       \setlength{\belowdisplayshortskip}{0pt}
     #+end_src

   Source:
   - [[https://tex.stackexchange.com/a/26522/225233][How to change the spacing between figures/tables and text?]]
   - [[https://stackoverflow.com/a/27243065/2860744][How to reduce the size of captions in all figures?]]
   - [[https://tex.stackexchange.com/a/45996/225233][How can I modify vertical space between figure and caption?]]
   - [[https://tex.stackexchange.com/a/53340/225233][Reducing spacing after headings]]
   - [[https://ctan.math.utah.edu/ctan/tex-archive/macros/latex/contrib/layouts/layman.pdf][Layouts package]]: enable the display of various elements of a
     document's layout

** How to smash all in-line math?

   There is a strong argument for increasing the =linespread= to
   accomodate for =$Y^{(0)}$= if you need to use smash too often. If
   you insist, though, use =\setlength{\lineskiplimit}{-100pt}=

   - [[https://tex.stackexchange.com/a/86902][How does one stop automatic line spacing increases when
     typesetting tall math]]

** How to influence the position of a figure/table?

   - Low-effort approach: load ~\usepackage[section]{placeins}~ and
     set ~h!~ for placement specifiers. It adds a ~\FloatBarrier~
     ([[https://tex.stackexchange.com/a/88659/225233][more]]) at the end of a section to avoid mixing floats and
     sections.
   - [[https://www.latex-project.org/publications/2014-FMi-TUB-tb111mitt-float-placement.pdf][How to influence the position of float environments like figure
     and table in LATEX?]]

** How to fiddle with math font height and width?

   https://paste.xinu.at/m-QzacZr/
   https://paste.xinu.at/m-sHDc/

** How to set a global path for input and graphic files?

   #+begin_src latex
     \makeatletter
     \def\input@path{{/path/to/folder/}}
     % or: \def\input@path{{/path/to/folder/}{/path/to/another/folder/}}
     \makeatother
   #+end_src

   Source: [[https://tex.stackexchange.com/a/24827/225233][\input and absolute paths]]

** How to align table columns without counting them?

   Say you want to align the first column to the left and the rest to
   the right without needing to figure out how many columns the table
   has. You can specify more columns than used, but not vice-versa, as
   in =l*9r= or =l*{99}=. Use brackets for more than one digit.

   #+begin_src latex
     \begin{tabular}{l*{99}r}
       col1 & col2 \\
     \end{tabular}
   #+end_src

** How to add the (sub)section name in the page header?

   #+begin_src latex
     % Add section name in page header
     \usepackage{fancyhdr}
     \fancypagestyle{main}{
       \fancyhf{}
       \renewcommand{\sectionmark}[1]{\markright{\thesection\ ##1}}
       \renewcommand{\subsectionmark}[1]{\markright{\thesubsection\ ##1}}
       \renewcommand{\subsubsectionmark}[1]{\markright{\thesubsubsection\ ##1}}
       \fancyhead[L]{\textsl{\footnotesize{\rightmark}}}
     }
     \pagestyle{main}
   #+end_src

** How to hide section headings?

   #+begin_src latex
     \usepackage{titlesec}

     \makeatletter
     \titleformat{\section}[runin]{}{}{0pt}{\@gobble}
     \titleformat{\subsection}[runin]{}{}{0pt}{\@gobble}

     \makeatother
     \titlespacing{\section}{\parindent}{0pt}{0pt}
     \titlespacing{\subsection}{\parindent}{0pt}{0pt}
   #+end_src

** How to change the caption font size?

   #+begin_src latex
     \usepackage{caption}
     \captionsetup{font=footnotesize}
   #+end_src

** How to properly compile a LaTeX project?

   Use =latemk file.tex -pdf= and that's it. No need to run multiple
   commands or figure out the right order. Put in a makefile if that's
   your workflow.

   Source: [[https://tex.stackexchange.com/a/40759/225233][how to properly 'make' a latex project?]]

** How to make GitHub compile a document after a push?

   - [[https://github.com/exaexa/better-mff-thesis/blob/b8d46ea25a11972ea9cb08f0b0da7df1a23ad178/.github/workflows/main.yml][GitHub workflow yaml file by exaexa]]

** How to build a custom style?
   - Consider building a class
     - [[https://www.latex-project.org/help/documentation/clsguide.pdf][LATEX2e for class and package writers]] Sec 2.3
     - Example [[https://github.com/exaexa/manurxiv/blob/master/manurxiv.cls#L20][manurxiv/manurxiv.cls at exaexa/manurxiv]]

Mix and match (suggestions for a research paper style):

   - Search for accessibility guidelines
   - A base template for inspiration, e.g., [[https://www.overleaf.com/latex/templates/icml2021-template/dsftnbmjgyhv][ICML2021 Template]]
   - Layout, e.g., two columns
   - Portrait pages need to be easy to set up
   - Line numbering
   - Author affiliation need to be easy to set up
   - Short title in header/footer
   - Page number in header/footer
   - Headings need to be easy to spot
   - Text font, e.g., libertinus, palladios, see also [[https://tug.org/FontCatalogue/][The LaTeX Font
     Catalogue]]
   - Math font
   - Load AMS packages
   - Reasonably minimal page margins
   - Reasonably minimal fig/table caption margins
   - Allow for fig/table extending over both columns
   - Appendix need to be easy to set up
   - Appendix fig/table numbering should start with A, e.g., Table A.1
   - Option to hide names and acknowledgments
   - Option for a short table of content on front page
   - Have some basic editing commands
     - Logical markup, see [[https://www.ctan.org/pkg/soul][CTAN: Package soul]] (Manual, Sec 5.1)
     - Note box, see [[https://tex.stackexchange.com/a/59342/225233][How to highlight an entire paragraph?]]
   - Recall that not everyone types in English

** What type of LaTeX commands exist?

   - Author commands
     - typically short, lower case names
     - e.g. =\section=, =\emph=, =\times=
   - Class and package writer commands
     - typically long, CamelCase names
     - e.g., =\InputIfFileExists=, =\RequirePackage=, =\PassOptionsToClass=
   - Internal commands
     - typically contain an @ in their name
     - e.g., =\@tempcnta=, =\@ifnextchar= and =\@eha=
   - Exceptions:
     - =\hbox= is internal
     - =\m@ne=, the constant -1, is for class and package writers

** How to make a class color safe?

   - Issue: when using ={\color{green} text}=, color is restored
     after the final =}=
     - e.g., \setbox0=\hbox{\color{green} ⟨text⟩}
   - Use LaTeX box commands rather than TeX primites
     - =\sbox= rather than =\setbox=
     - =\mbox= rather than =\hbox=
     - =\parbox= or a =minipage= environment rather than =\vbox=
   - Use =\normalcolor= to set regions to main document color rather
     like =\normalfont=

** How to write a custom LaTeX class?

   - Use the =doc= software which comes with LaTeX (see The LaTeX companion)

** Resources

   - [[https://tobi.oetiker.ch/lshort/lshort.pdf][The Not So Short Introduction to LaTeX2e]]: LaTeX2e in 139 minutes
   - [[https://www.ctan.org/pkg/texbook][The TeXbook]]: an example of the business of writing a book in TeX
